<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD6e5KCfZHZEoJLPDVUn24zM-30hir0CwM&sensor=true"></script>

<div class="row">
  <div class="col-lg-6 col-md-6 col-md-6">
    <div>ID: <%= @school.id %></div>
    <div><strong><%= @school.name %></strong></div>
    <div><%= @school.address %></div>
    <div><%= @school.city %>, <%= @school.state %> <%= @school.zip %></div>
    <div><%= @school.county %> County</div>
    <div><%= @school.phone_number %></div>
    <div><%= @school.url %></div>
    <div><%= @school.latitude %>, <%= @school.longitude %></div>
    <div><%= link_to 'Edit', edit_school_path(@school) %> | <%= link_to 'Back', root_path %></div>       
  </div>

  <div class="col-lg-6 col-md-6 col-md-6">
    <div id="map-canvas"></div>
  </div>
</div>

<script type="text/javascript">
 function initialize() {

  var school_array = []; 
  var star = "<%= asset_path('star.png') %>";
  var blue = "<%= asset_path('blue.png') %>";
  var red = "<%= asset_path('red.png') %>";

  <% if @school.rating >= "8" %>
    school_array.push([new google.maps.LatLng(<%= @school.latitude %>, <%= @school.longitude %>), star]);
  <% elsif @school.rating <= "4" %>
    school_array.push([new google.maps.LatLng(<%= @school.latitude %>, <%= @school.longitude %>), red]);
  <% else %>
    school_array.push([new google.maps.LatLng(<%= @school.latitude %>, <%= @school.longitude %>), blue]);
  <% end %>

  console.log(school_array);

   var mapOptions = {
    center: (school_array[0][0]),
     zoom: 15
   };

   var map = new google.maps.Map(document.getElementById("map-canvas"),
       mapOptions);

  for(var i=0; i < school_array.length; i++)
    {
      var marker = new google.maps.Marker({
        position: school_array[i][0],
        icon: school_array[i][1], 
        title: "test",
        map: map
      })
    }
 }
 google.maps.event.addDomListener(window, 'page:change', initialize);
</script>